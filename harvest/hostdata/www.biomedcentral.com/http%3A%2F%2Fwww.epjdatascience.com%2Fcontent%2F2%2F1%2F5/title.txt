Probing crowd density through smartphones in city-scale mass gatherings